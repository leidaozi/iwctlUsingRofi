# Setting Up systemd-networkd with iwd

1) Install iwd:
```
pacman -S iwd
```

2) Enable iwd service:
```
systemctl enable iwd
```

3) Install systemd:
```
pacman -S systemd
```

4) Enable systemd-networkd service:
```
systemctl enable systemd-networkd
```

5) Also enable systemd-resolved for DNS resolution:
```
systemctl enable systemd-resolved
```

6) Create a basic network configuration file for systemd-networkd:
```
mkdir -p /etc/systemd/network/
```

7) Create a wireless network configuration file:
```
nano /etc/systemd/network/25-wireless.network
```

8) Add this content:
```
[Match]
Name=wlan0

[Network]
DHCP=yes
```

(Note: If your wireless interface isn't named wlan0, you'll need to adjust this. You can check with `ip link` to see the correct name)

9) Configure iwd to work with systemd-networkd by creating/editing this file:
```
mkdir -p /etc/iwd/
nano /etc/iwd/main.conf
```

10) Add this content:
```
[General]
EnableNetworkConfiguration=false

[Network]
NameResolvingService=systemd
```

11) If you need to create symbolic link for systemd-resolved:
```
ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf
```

12) After rebooting into your new system, you'll be able to connect to wireless networks using:
```
iwctl
```
